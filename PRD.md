# Photo-Watermark 产品需求文档

## 1. 产品概述

开发一个Java命令行程序，能够读取图片文件的EXIF信息中的拍摄时间，并将其作为水印添加到图片上，用户可以自定义水印的字体大小、颜色和位置。

## 2. 功能需求

### 2.1 图片文件处理
- 支持用户输入一个图片文件路径
- 读取该路径下所有图片文件的EXIF信息中的拍摄时间
- 从拍摄时间中提取年月日信息作为水印文本

### 2.2 水印自定义设置
- 允许用户设置水印字体大小
- 允许用户设置水印颜色
- 允许用户设置水印在图片上的位置（左上角、居中、右下角等选项）

### 2.3 图片保存
- 将添加水印后的图片保存为新的图片文件
- 保存在原目录下创建的名为`原目录名_watermark`的子目录中

## 3. 非功能需求

### 3.1 性能要求
- 能够高效处理多个图片文件
- 处理大尺寸图片时保持合理的内存占用

### 3.2 兼容性要求
- 支持常见的图片格式（如JPEG、PNG等）
- 支持从各种相机和设备拍摄的图片中读取EXIF信息

### 3.3 易用性要求
- 提供清晰的命令行参数提示和使用说明
- 提供友好的错误提示信息

## 4. 使用流程

1. 用户通过命令行启动程序
2. 用户输入图片文件路径
3. 用户设置水印的字体大小、颜色和位置
4. 程序处理图片并添加水印
5. 程序将处理后的图片保存到指定目录
6. 程序显示处理完成的提示信息

## 5. 技术要求

- 使用Java语言开发
- 使用适当的Java库读取EXIF信息（如metadata-extractor）
- 使用Java内置的图像处理API绘制水印
- 采用命令行交互方式

## 6. 输出规范

- 处理后的图片文件名与原图保持一致
- 图片保存格式与原图保持一致
- 确保水印添加后不影响原图的主要内容识别
- 确保水印清晰度和可读性

## 7. 错误处理

- 处理无法读取的图片文件时给出提示，继续处理其他文件
- 处理没有EXIF信息或拍摄时间的图片时给出提示
- 处理文件路径不存在或权限不足的情况时给出明确的错误信息